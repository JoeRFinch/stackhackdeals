<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Walmart Deals - StackHack Deals</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <nav class="topnav">
    <a href="index.html">Home</a>
    <a href="#deals">Deals</a>
    <a href="#referrals">Referrals</a>
    <a href="#tips">Tips</a>
    <a href="#howto">How-Tos</a>
    <a href="#qa">Q&A</a>
  </nav>

  <header>
    <h1>ðŸ›’ Walmart Deals</h1>
  </header>

  <section id="walmartDeals" class="color-section green">
    <h2>All Walmart Deals</h2>
    <ul id="storeDealList"></ul>
  </section>

  <footer>
    <p>Â© 2025 StackHack Deals</p>
  </footer>

  <script>
    // Load deals.json and filter Walmart deals, render with full info

    fetch('deals.json')
      .then(res => res.json())
      .then(deals => {
        const walmartDeals = deals.filter(d => d.store.toLowerCase() === 'walmart');

        const list = document.getElementById('storeDealList');

        if (walmartDeals.length === 0) {
          list.innerHTML = '<li>No Walmart deals found.</li>';
          return;
        }

        list.innerHTML = walmartDeals.map(d => `
          <li class="deal-item">
            <div class="deal-title" style="font-weight: bold; font-size: 1.2em; margin-bottom: 0.3em;">
              ${d.title} are a <strong>$${d.moneyMakerAmount.toFixed(2)}</strong> Money Maker
            </div>

            ${d.productLink ? `<a href="${d.productLink}" target="_blank" rel="noopener noreferrer">Product Link</a>` : ''}

            ${d.image ? `<div><img src="${d.image}" alt="${d.title}" style="max-width: 200px; margin: 10px 0;" onerror="this.style.display='none'"></div>` : ''}

            <ul class="deal-breakdown">
              ${d.breakdown.map(line => `<li>${line.includes('$') ? line.replace(/(\$\d+(\.\d+)?)/g, '<strong>$1</strong>') : line}</li>`).join('')}
            </ul>

            <ul class="deal-notes">
              ${d.notes.map(note => `<li>${note}</li>`).join('')}
            </ul>
          </li>
        `).join('');
      })
      .catch(err => {
        document.getElementById('storeDealList').innerHTML = `<li>Error loading deals: ${err.message}</li>`;
        console.error(err);
      });
  </script>
</body>
</html>
